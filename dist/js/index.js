"use strict";$(function(){var e,n=!1;(e=getCookie(document.cookie,"username"))&&(n=!0,$(".nav-register").css("display","none"),$(".nav-login").text("欢迎您，"+e).css("width","160"),$(".btn.btn-warning").text("点击进入我的购物车").attr("href","./shop.html").prev().css("display","none").prev().css({background:'url("../images/nav/1.jpg")',"background-size":"150px 96px"}),$(".nav-list").click(function(){location.href="./shop.html"})),window.history.replaceState(null,null,window.location.href),setInterval(function(){var e=parseFloat($(".pic-con .middle ul").css("top"));$(".pic-con .middle ul").animate({top:e-144+"px"},1e3,function(){$(".pic-con .middle ul").css("top",0)})},3e3);var t=new Swiper(".swiper-container",{loop:!0,autoplay:2e3,speed:1e3,autoplayDisableOnInteraction:!1,pagination:".pagination",paginationClickable:!0,onSlideChangeStart:function(e){var t=document.getElementById("pic");c(e.activeLoopIndex,getStyle(t,"backgroundColor"))}});$(".arrow-left").on("click",function(e){e.preventDefault(),t.swipePrev()}),$(".arrow-right").on("click",function(e){e.preventDefault(),t.swipeNext()});var c=function(e,t){var n=document.createElement("img"),c=document.createElement("canvas");n.src="../images/pic/pic-"+(e+1)+".png",c.width=n.width,c.height=n.height,c.style.display="none";var i=c.getContext("2d");i.drawImage(n,0,0,c.width,c.height);for(var o=i.getImageData(0,0,n.width,n.height).data,l=[0,0,0,0],a=0;a<o.length;a++){l[a%4]+=o[a]}for(a=0;a<l.length;a++)l[a]=parseInt(l[a]/(o.length/4));var s,r,d,p=document.getElementById("pic");s=p,r=l,clearInterval(s.t),s.t=setInterval(function(){var e,t,n=(t="backgroundColor",(e=s).currentStyle?e.currentStyle[t]:getComputedStyle(e,!1)[t]);n=n.slice(4,this.length-1).split(", ");for(var c=[0,0,0],i=0;i<n.length;i++)c[i]=(r[i]-n[i])/80,c[i]=0<c[i]?Math.ceil(c[i]):Math.floor(c[i]);s.style.backgroundColor="rgb("+(c[0]+parseInt(n[0]))+","+(c[1]+parseInt(n[1]))+","+(c[2]+parseInt(n[2]))+")";for(var o=!0,i=0;i<3;i++)if(n[i]!=r[i]){o=!1;break}o&&(clearInterval(s.t),d&&d())},8)};$(".search").on("keyup",function(){$(".search-list").css("display","block");var e=$(".search").eq(0).val(),t="lcb"+Math.random().toString().slice(2)+(new Date).getTime();$.ajax({url:"https://ds.suning.com/ds/his/new/-"+e+"-0-1_0-"+t+".jsonp?",dataType:"jsonp",jsonpCallback:t,success:function(e){var n=$(".search-list");n.empty(),$.each(e.words,function(e,t){null!=t.keyword&&n.append("<li>"+t.keyword+"</li>")}),$(".search-list li").click(function(){$(".search").eq(0).val($(this).text()),$(".search-list").css("display","none")})}})}),$(".car").mouseenter(function(){$(".nav-car").slideDown("fast")}),$(".car").mouseleave(function(){$(".nav-car").slideUp("fast")}),$(".btn-warning").click(function(){if(n)location.href="./shop.html";else{$(".nav-car").css("display","none");var e=(document.documentElement.clientHeight-380)/2,t=(document.documentElement.clientWidth-352)/2;$(".login").css({display:"block",left:t,top:e}),$(".shadow").css("display","block")}}),$(window).resize(function(){var e=(document.documentElement.clientHeight-380)/2,t=(document.documentElement.clientWidth-352)/2;$(".login").css({left:t,top:e}),$(".register").css({left:t,top:e})}),$(".cancel").click(function(){$(".login").css("display","none"),$(".shadow").css("display","none"),$(".register").css("display","none")}),$(".re").click(function(){var e=(document.documentElement.clientHeight-380)/2,t=(document.documentElement.clientWidth-352)/2;$(".login").css("display","none"),$(".register").css("display","block"),$(".register").css({left:t,top:e}),$(".shadow").css("display","block")}),$(".lg").click(function(){var e=(document.documentElement.clientHeight-380)/2,t=(document.documentElement.clientWidth-352)/2;$(".login").css("display","block"),$(".register").css("display","none"),$(".login").css({left:t,top:e}),$(".shadow").css("display","block")}),$(".nav-login").on("click",function(){n||$(".lg").trigger("click")}),$(".nav-register").click(function(){$(".re").trigger("click")}),$("img").click(function(){location.href="./message.html"}),$("#agree").click(function(){$(this).attr("check")&&"false"!=$(this).attr("check")?$(this).attr("check",!1):$(this).attr("check",!0)})});